/**Thrown when either too much or not enough arguments were passed. Prints what was expected and what was actually passed.*/
class BadArgumentsAmountError extends Error {
    constructor(expectedArgsNum, passedArgs, details) {
        const requiresExactNumOfArgs = !Array.isArray(expectedArgsNum);
        const argsWithValues = BadArgumentsAmountError.getArgsWithValues(passedArgs);
        const argNamesValues = BadArgumentsAmountError.getArgNamesValues(argsWithValues);
        let message;
        if (requiresExactNumOfArgs) {
            message = `Didn't receive exactly ${expectedArgsNum} arg. `;
        }
        else {
            message = `Didn't receive between ${expectedArgsNum[0]} to ${expectedArgsNum[1]} args. `;
        }
        message += `Instead, out of ${Object.keys(passedArgs).length} received (${Object.keys(passedArgs)}), ${Object.keys(argsWithValues).length} had value: "${argNamesValues}". ${details ? 'Details: ' + details : ''}`;
        super(message);
    }
    static getArgNamesValues(argsWithValues) {
        return Object.entries(argsWithValues)
            // @ts-ignore
            .flatMap(([argname, argval]) => `${argname}: ${argval}`)
            .join('", "');
    }
    static getArgsWithValues(passedArgs) {
        const argsWithValues = {};
        for (let [argname, argval] of Object.entries(passedArgs)) {
            if (argval !== undefined)
                argsWithValues[argname] = argval;
        }
        return argsWithValues;
    }
}
// function enumerate(obj: undefined): [void];
// function enumerate<T>(obj: T): never;
// function enumerate<T>(obj: T): [keyof T, T[keyof T]][];
// function enumerate<T>(obj: T): T extends string[]
//     ? [number, string][]
//     : [keyof T, T[keyof T]][] {
function enumerate(obj) {
    // undefined    []
    // {}           []
    // []           []
    // ""           []
    // number       TypeError
    // null         TypeError
    // boolean      TypeError
    // Function     TypeError
    // "foo"        [ [0, "f"], [1, "o"], [2, "o"] ]
    // [ "foo" ]    [ [0, "foo"] ]
    // [ 10 ]       [ [0, 10] ]
    // { a: "foo" } [ ["a", "foo"] ]
    // // ()=>{}    ?
    let typeofObj = typeof obj;
    if (obj === undefined
        || isEmptyObj(obj)
        || isEmptyArr(obj)
        // @ts-ignore
        || obj === "") {
        return [];
    }
    if (obj === null
        || typeofObj === "boolean"
        || typeofObj === "number"
        || typeofObj === "function") {
        throw new TypeError(`${typeofObj} object is not iterable`);
    }
    let array = [];
    if (isArray(obj)) {
        let i = 0;
        for (let x of obj) {
            array.push([i, x]);
            i++;
        }
    }
    else {
        for (let prop in obj) {
            array.push([prop, obj[prop]]);
        }
    }
    return array;
}
/*let obj0: { a: boolean, b: number } = {a: true, b: 1};
 let arr0: number[] = [1, 2, 3, 4];
 let arr1: string[] = ["1", "2", "3", "4"];
 let num0: number = 5;
 let undefined0: undefined;
 let null0: null = null;
 let boolean0: boolean = true;
 
 let MyFoo = enumerate(undefined0);
 if (MyFoo === true) {
 console.log('hi');
 }
 */
function wait(ms) {
    return new Promise(resolve => setTimeout(resolve, ms));
}
/**Check every `checkInterval` ms if `cond()` is truthy. If, within `timeout`, cond() is truthy, return `true`. Return `false` if time is out.
 * @example
 * // Give the user a 200ms chance to get her pointer over "mydiv". Continue immediately once she does, or after 200ms if she doesn't.
 * mydiv.pointerenter( () => mydiv.pointerHovering = true; )
 * const pointerOnMydiv = await waitUntil(() => mydiv.pointerHovering, 200, 10);*/
async function waitUntil(cond, timeout = Infinity, checkInterval = 20) {
    if (checkInterval <= 0)
        throw new Error(`checkInterval <= 0. checkInterval: ${checkInterval}`);
    if (checkInterval > timeout)
        throw new Error(`checkInterval > timeout (${checkInterval} > ${timeout}). Has to be lower than timeout.`);
    const loops = timeout / checkInterval;
    if (loops == 1)
        console.warn(`loops == 1, you probably didn't want this to happen`);
    let count = 0;
    while (count < loops) {
        if (cond())
            return true;
        await wait(checkInterval);
        count++;
    }
    return false;
}
function isArray(obj) {
    return typeof obj !== "string" && (Array.isArray(obj) || typeof obj[Symbol.iterator] === 'function');
}
function isEmptyArr(collection) {
    return isArray(collection) && getLength(collection) === 0;
}
function isEmptyObj(obj) {
    // {}               true
    // new Boolean()    true
    // new Number()     true
    // {hi:"bye"}       false
    // []               false
    // undefined        false
    // null             false
    // ()=>{}           false
    // function(){}     false
    // Boolean()        false
    // Number()         false
    return isObject(obj) && !isArray(obj) && Object.keys(obj).length === 0;
}
function isFunction(fn) {
    // ()=>{}           true
    // function(){}     true
    // Function         true
    // Function()       true
    // new Function()   true
    // Boolean          true
    // Number           true
    // {}               false
    // {hi:"bye"}       false
    // []               false
    // Boolean()        false
    // new Boolean()    false
    // Number()         false
    // new Number()     false
    // undefined        false
    // null             false
    let toStringed = {}.toString.call(fn);
    return !!fn && toStringed === '[object Function]';
}
// *  underscore.js
function isObject(obj) {
    // {}               true
    // {hi:"bye"}       true
    // []               true
    // new Boolean()    true
    // new Number()     true
    // undefined        false
    // null             false
    // ()=>{}           false
    // function(){}     false
    // Boolean()        false
    // Number()         false
    return typeof obj === 'object' && !!obj;
}
function shallowProperty(key) {
    return function (obj) {
        return obj == null ? void 0 : obj[key];
    };
}
function getLength(collection) {
    return shallowProperty('length')(collection);
}
/*const MAX_ARRAY_INDEX = Math.pow(2, 53) - 1;
 
 function isArrayLike(collection): boolean {
 const length = getLength(collection);
 return typeof length == 'number' && length >= 0 && length <= MAX_ARRAY_INDEX;
 }
 */
// *  misc
// child extends sup
function extend(sup, child) {
    child.prototype = sup.prototype;
    const handler = {
        construct
    };
    // "new BoyCls"
    function construct(_, argArray) {
        const obj = new child;
        sup.apply(obj, argArray); // calls PersonCtor. Sets name
        child.apply(obj, argArray); // calls BoyCtor. Sets age
        return obj;
    }
    // @ts-ignore
    const proxy = new Proxy(child, handler);
    return proxy;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvZXhjZXB0aW9ucy50cyIsIi4uL3NyYy91dGlsLnRzIiwiLi4vc3JjL3R5cGluZ3MvY3NzLnRzIiwiLi4vc3JjL3R5cGluZ3MvY3RvcnMudHMiLCIuLi9zcmMvdHlwaW5ncy9taXNjLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLDRIQUE0SDtBQUM1SCxNQUFNLHVCQUF3QixTQUFRLEtBQUs7SUFLdkMsWUFBWSxlQUE0QyxFQUFFLFVBQWtCLEVBQUUsT0FBZ0I7UUFDMUYsTUFBTSxzQkFBc0IsR0FBWSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsZUFBZSxDQUFDLENBQUM7UUFDeEUsTUFBTSxjQUFjLEdBQUcsdUJBQXVCLENBQUMsaUJBQWlCLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDN0UsTUFBTSxjQUFjLEdBQVcsdUJBQXVCLENBQUMsaUJBQWlCLENBQUMsY0FBYyxDQUFDLENBQUM7UUFDekYsSUFBSSxPQUFPLENBQUM7UUFDWixJQUFLLHNCQUFzQixFQUFHO1lBQzFCLE9BQU8sR0FBRywwQkFBMEIsZUFBZSxRQUFRLENBQUE7U0FDOUQ7YUFBTTtZQUNILE9BQU8sR0FBRywwQkFBMEIsZUFBZSxDQUFDLENBQUMsQ0FBQyxPQUFPLGVBQWUsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFBO1NBQzNGO1FBQ0QsT0FBTyxJQUFJLG1CQUFtQixNQUFNLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLE1BQU0sY0FBYyxNQUFNLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLE1BQU0sQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUMsTUFBTSxnQkFBZ0IsY0FBYyxNQUFNLE9BQU8sQ0FBQyxDQUFDLENBQUMsV0FBVyxHQUFHLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUM7UUFDcE4sS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQ25CLENBQUM7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O0FBR0gsVUFBVTtBQUNWLG9CQUFvQjtBQUNwQixTQUFTLE1BQU0sQ0FBQyxHQUFHLEVBQUUsS0FBSztJQUN0QixLQUFLLENBQUMsU0FBUyxHQUFHLEdBQUcsQ0FBQyxTQUFTLENBQUM7SUFDaEMsTUFBTSxPQUFPLEdBQUc7UUFDWixTQUFTO0tBQ1osQ0FBQztJQUVGLGVBQWU7SUFDZixTQUFTLFNBQVMsQ0FBQyxDQUFDLEVBQUUsUUFBUTtRQUMxQixNQUFNLEdBQUcsR0FBRyxJQUFJLEtBQUssQ0FBQztRQUN0QixHQUFHLENBQUMsS0FBSyxDQUFDLEdBQUcsRUFBRSxRQUFRLENBQUMsQ0FBQyxDQUFJLDhCQUE4QjtRQUMzRCxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsRUFBRSxRQUFRLENBQUMsQ0FBQyxDQUFDLDBCQUEwQjtRQUN0RCxPQUFPLEdBQUcsQ0FBQztJQUNmLENBQUM7SUFHRCxhQUFhO0lBQ2IsTUFBTSxLQUFLLEdBQUcsSUFBSSxLQUFLLENBQUMsS0FBSyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQ3hDLE9BQU8sS0FBSyxDQUFDO0FBQ2pCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipUaHJvd24gd2hlbiBlaXRoZXIgdG9vIG11Y2ggb3Igbm90IGVub3VnaCBhcmd1bWVudHMgd2VyZSBwYXNzZWQuIFByaW50cyB3aGF0IHdhcyBleHBlY3RlZCBhbmQgd2hhdCB3YXMgYWN0dWFsbHkgcGFzc2VkLiovXG5jbGFzcyBCYWRBcmd1bWVudHNBbW91bnRFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICAvKipAcGFyYW0gZXhwZWN0ZWRBcmdzTnVtIC0gQmVpbmcgYSBudW1iZXIgYW5kIG5vdCBhcnJheSwgaXQgaW1wbGllcyBmdW5jdGlvbiByZXF1aXJlcyBhbiBleGFjdCBudW1iZXIgb2YgYXJncyovXG4gICAgY29uc3RydWN0b3IoZXhwZWN0ZWRBcmdzTnVtOiBudW1iZXIsIHBhc3NlZEFyZ3M6IG9iamVjdCwgZGV0YWlscz86IHN0cmluZylcbiAgICAvKipAcGFyYW0gZXhwZWN0ZWRBcmdzTnVtIC0gQmVpbmcgYSAyLXR1cGxlIGFuZCBub3QgYSBudW1iZXIsIGltcGxpZXMgZnVuY3Rpb24gcmVxdWlyZXMgYmV0d2VlbiB0aGlzIGFuZCB0aGF0IG51bWJlciBvZiBhcmdzKi9cbiAgICBjb25zdHJ1Y3RvcihleHBlY3RlZEFyZ3NOdW06IFsgbnVtYmVyLCBudW1iZXIgXSwgcGFzc2VkQXJnczogb2JqZWN0LCBkZXRhaWxzPzogc3RyaW5nKVxuICAgIGNvbnN0cnVjdG9yKGV4cGVjdGVkQXJnc051bTogbnVtYmVyIHwgWyBudW1iZXIsIG51bWJlciBdLCBwYXNzZWRBcmdzOiBvYmplY3QsIGRldGFpbHM/OiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3QgcmVxdWlyZXNFeGFjdE51bU9mQXJnczogYm9vbGVhbiA9ICFBcnJheS5pc0FycmF5KGV4cGVjdGVkQXJnc051bSk7XG4gICAgICAgIGNvbnN0IGFyZ3NXaXRoVmFsdWVzID0gQmFkQXJndW1lbnRzQW1vdW50RXJyb3IuZ2V0QXJnc1dpdGhWYWx1ZXMocGFzc2VkQXJncyk7XG4gICAgICAgIGNvbnN0IGFyZ05hbWVzVmFsdWVzOiBzdHJpbmcgPSBCYWRBcmd1bWVudHNBbW91bnRFcnJvci5nZXRBcmdOYW1lc1ZhbHVlcyhhcmdzV2l0aFZhbHVlcyk7XG4gICAgICAgIGxldCBtZXNzYWdlO1xuICAgICAgICBpZiAoIHJlcXVpcmVzRXhhY3ROdW1PZkFyZ3MgKSB7XG4gICAgICAgICAgICBtZXNzYWdlID0gYERpZG4ndCByZWNlaXZlIGV4YWN0bHkgJHtleHBlY3RlZEFyZ3NOdW19IGFyZy4gYFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbWVzc2FnZSA9IGBEaWRuJ3QgcmVjZWl2ZSBiZXR3ZWVuICR7ZXhwZWN0ZWRBcmdzTnVtWzBdfSB0byAke2V4cGVjdGVkQXJnc051bVsxXX0gYXJncy4gYFxuICAgICAgICB9XG4gICAgICAgIG1lc3NhZ2UgKz0gYEluc3RlYWQsIG91dCBvZiAke09iamVjdC5rZXlzKHBhc3NlZEFyZ3MpLmxlbmd0aH0gcmVjZWl2ZWQgKCR7T2JqZWN0LmtleXMocGFzc2VkQXJncyl9KSwgJHtPYmplY3Qua2V5cyhhcmdzV2l0aFZhbHVlcykubGVuZ3RofSBoYWQgdmFsdWU6IFwiJHthcmdOYW1lc1ZhbHVlc31cIi4gJHtkZXRhaWxzID8gJ0RldGFpbHM6ICcgKyBkZXRhaWxzIDogJyd9YDtcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XG4gICAgfVxuICAgIFxuICAgIHN0YXRpYyBnZXRBcmdOYW1lc1ZhbHVlcyhhcmdzV2l0aFZhbHVlczogb2JqZWN0KTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKGFyZ3NXaXRoVmFsdWVzKVxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgICAgICAgICAgLmZsYXRNYXAoKFsgYXJnbmFtZSwgYXJndmFsIF0pID0+IGAke2FyZ25hbWV9OiAke2FyZ3ZhbH1gKVxuICAgICAgICAgICAgICAgICAgICAgLmpvaW4oJ1wiLCBcIicpO1xuICAgIH1cbiAgICBcbiAgICBzdGF0aWMgZ2V0QXJnc1dpdGhWYWx1ZXMocGFzc2VkQXJnczogb2JqZWN0KSB7XG4gICAgICAgIGNvbnN0IGFyZ3NXaXRoVmFsdWVzOiBvYmplY3QgPSB7fTtcbiAgICAgICAgZm9yICggbGV0IFsgYXJnbmFtZSwgYXJndmFsIF0gb2YgT2JqZWN0LmVudHJpZXMocGFzc2VkQXJncykgKSB7XG4gICAgICAgICAgICBpZiAoIGFyZ3ZhbCAhPT0gdW5kZWZpbmVkIClcbiAgICAgICAgICAgICAgICBhcmdzV2l0aFZhbHVlc1thcmduYW1lXSA9IGFyZ3ZhbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXJnc1dpdGhWYWx1ZXM7XG4gICAgfVxufVxuXG5cblxuIiwiLy8gZnVuY3Rpb24gZW51bWVyYXRlKG9iajogdW5kZWZpbmVkKTogW3ZvaWRdO1xuXG4vLyBmdW5jdGlvbiBlbnVtZXJhdGU8VD4ob2JqOiBUKTogbmV2ZXI7XG4vLyBmdW5jdGlvbiBlbnVtZXJhdGU8VD4ob2JqOiBUKTogW2tleW9mIFQsIFRba2V5b2YgVF1dW107XG5cblxuLy8gZnVuY3Rpb24gZW51bWVyYXRlPFQ+KG9iajogVCk6IFQgZXh0ZW5kcyBzdHJpbmdbXVxuLy8gICAgID8gW251bWJlciwgc3RyaW5nXVtdXG4vLyAgICAgOiBba2V5b2YgVCwgVFtrZXlvZiBUXV1bXSB7XG5cblxuZnVuY3Rpb24gZW51bWVyYXRlPFQ+KG9iajogVCk6IEVudW1lcmF0ZWQ8VD4ge1xuICAgIC8vIHVuZGVmaW5lZCAgICBbXVxuICAgIC8vIHt9ICAgICAgICAgICBbXVxuICAgIC8vIFtdICAgICAgICAgICBbXVxuICAgIC8vIFwiXCIgICAgICAgICAgIFtdXG4gICAgLy8gbnVtYmVyICAgICAgIFR5cGVFcnJvclxuICAgIC8vIG51bGwgICAgICAgICBUeXBlRXJyb3JcbiAgICAvLyBib29sZWFuICAgICAgVHlwZUVycm9yXG4gICAgLy8gRnVuY3Rpb24gICAgIFR5cGVFcnJvclxuICAgIC8vIFwiZm9vXCIgICAgICAgIFsgWzAsIFwiZlwiXSwgWzEsIFwib1wiXSwgWzIsIFwib1wiXSBdXG4gICAgLy8gWyBcImZvb1wiIF0gICAgWyBbMCwgXCJmb29cIl0gXVxuICAgIC8vIFsgMTAgXSAgICAgICBbIFswLCAxMF0gXVxuICAgIC8vIHsgYTogXCJmb29cIiB9IFsgW1wiYVwiLCBcImZvb1wiXSBdXG4gICAgLy8gLy8gKCk9Pnt9ICAgID9cbiAgICBsZXQgdHlwZW9mT2JqID0gdHlwZW9mIG9iajtcbiAgICBpZiAoXG4gICAgICAgIG9iaiA9PT0gdW5kZWZpbmVkXG4gICAgICAgIHx8IGlzRW1wdHlPYmoob2JqKVxuICAgICAgICB8fCBpc0VtcHR5QXJyKG9iailcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICB8fCBvYmogPT09IFwiXCJcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIFtdIGFzIEVudW1lcmF0ZWQ8VD47XG4gICAgfVxuICAgIFxuICAgIGlmIChcbiAgICAgICAgb2JqID09PSBudWxsXG4gICAgICAgIHx8IHR5cGVvZk9iaiA9PT0gXCJib29sZWFuXCJcbiAgICAgICAgfHwgdHlwZW9mT2JqID09PSBcIm51bWJlclwiXG4gICAgICAgIHx8IHR5cGVvZk9iaiA9PT0gXCJmdW5jdGlvblwiXG4gICAgKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYCR7dHlwZW9mT2JqfSBvYmplY3QgaXMgbm90IGl0ZXJhYmxlYCk7XG4gICAgfVxuICAgIGxldCBhcnJheSA9IFtdO1xuICAgIGlmICggaXNBcnJheShvYmopICkge1xuICAgICAgICBsZXQgaTogbnVtYmVyID0gMDtcbiAgICAgICAgZm9yICggbGV0IHggb2Ygb2JqICkge1xuICAgICAgICAgICAgYXJyYXkucHVzaChbIGksIHggXSk7XG4gICAgICAgICAgICBpKys7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICBmb3IgKCBsZXQgcHJvcCBpbiBvYmogKSB7XG4gICAgICAgICAgICBhcnJheS5wdXNoKFsgcHJvcCwgb2JqW3Byb3BdIF0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBhcnJheSBhcyBFbnVtZXJhdGVkPFQ+O1xufVxuXG5cbi8qbGV0IG9iajA6IHsgYTogYm9vbGVhbiwgYjogbnVtYmVyIH0gPSB7YTogdHJ1ZSwgYjogMX07XG4gbGV0IGFycjA6IG51bWJlcltdID0gWzEsIDIsIDMsIDRdO1xuIGxldCBhcnIxOiBzdHJpbmdbXSA9IFtcIjFcIiwgXCIyXCIsIFwiM1wiLCBcIjRcIl07XG4gbGV0IG51bTA6IG51bWJlciA9IDU7XG4gbGV0IHVuZGVmaW5lZDA6IHVuZGVmaW5lZDtcbiBsZXQgbnVsbDA6IG51bGwgPSBudWxsO1xuIGxldCBib29sZWFuMDogYm9vbGVhbiA9IHRydWU7XG4gXG4gbGV0IE15Rm9vID0gZW51bWVyYXRlKHVuZGVmaW5lZDApO1xuIGlmIChNeUZvbyA9PT0gdHJ1ZSkge1xuIGNvbnNvbGUubG9nKCdoaScpO1xuIH1cbiAqL1xuXG5cbmZ1bmN0aW9uIHdhaXQobXM6IG51bWJlcik6IFByb21pc2U8YW55PiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBtcykpO1xufVxuXG4vKipDaGVjayBldmVyeSBgY2hlY2tJbnRlcnZhbGAgbXMgaWYgYGNvbmQoKWAgaXMgdHJ1dGh5LiBJZiwgd2l0aGluIGB0aW1lb3V0YCwgY29uZCgpIGlzIHRydXRoeSwgcmV0dXJuIGB0cnVlYC4gUmV0dXJuIGBmYWxzZWAgaWYgdGltZSBpcyBvdXQuXG4gKiBAZXhhbXBsZVxuICogLy8gR2l2ZSB0aGUgdXNlciBhIDIwMG1zIGNoYW5jZSB0byBnZXQgaGVyIHBvaW50ZXIgb3ZlciBcIm15ZGl2XCIuIENvbnRpbnVlIGltbWVkaWF0ZWx5IG9uY2Ugc2hlIGRvZXMsIG9yIGFmdGVyIDIwMG1zIGlmIHNoZSBkb2Vzbid0LlxuICogbXlkaXYucG9pbnRlcmVudGVyKCAoKSA9PiBteWRpdi5wb2ludGVySG92ZXJpbmcgPSB0cnVlOyApXG4gKiBjb25zdCBwb2ludGVyT25NeWRpdiA9IGF3YWl0IHdhaXRVbnRpbCgoKSA9PiBteWRpdi5wb2ludGVySG92ZXJpbmcsIDIwMCwgMTApOyovXG5hc3luYyBmdW5jdGlvbiB3YWl0VW50aWwoY29uZDogKCkgPT4gYm9vbGVhbiwgdGltZW91dDogbnVtYmVyID0gSW5maW5pdHksIGNoZWNrSW50ZXJ2YWw6IG51bWJlciA9IDIwKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgaWYgKCBjaGVja0ludGVydmFsIDw9IDAgKVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYGNoZWNrSW50ZXJ2YWwgPD0gMC4gY2hlY2tJbnRlcnZhbDogJHtjaGVja0ludGVydmFsfWApO1xuICAgIGlmICggY2hlY2tJbnRlcnZhbCA+IHRpbWVvdXQgKVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYGNoZWNrSW50ZXJ2YWwgPiB0aW1lb3V0ICgke2NoZWNrSW50ZXJ2YWx9ID4gJHt0aW1lb3V0fSkuIEhhcyB0byBiZSBsb3dlciB0aGFuIHRpbWVvdXQuYCk7XG4gICAgXG4gICAgY29uc3QgbG9vcHMgPSB0aW1lb3V0IC8gY2hlY2tJbnRlcnZhbDtcbiAgICBpZiAoIGxvb3BzID09IDEgKVxuICAgICAgICBjb25zb2xlLndhcm4oYGxvb3BzID09IDEsIHlvdSBwcm9iYWJseSBkaWRuJ3Qgd2FudCB0aGlzIHRvIGhhcHBlbmApO1xuICAgIGxldCBjb3VudCA9IDA7XG4gICAgd2hpbGUgKCBjb3VudCA8IGxvb3BzICkge1xuICAgICAgICBpZiAoIGNvbmQoKSApXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgYXdhaXQgd2FpdChjaGVja0ludGVydmFsKTtcbiAgICAgICAgY291bnQrKztcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG5mdW5jdGlvbiBpc0FycmF5PFQ+KG9iaik6IG9iaiBpcyBBcnJheTxUPiB7XG4gICAgcmV0dXJuIHR5cGVvZiBvYmogIT09IFwic3RyaW5nXCIgJiYgKEFycmF5LmlzQXJyYXkob2JqKSB8fCB0eXBlb2Ygb2JqW1N5bWJvbC5pdGVyYXRvcl0gPT09ICdmdW5jdGlvbicpO1xufVxuXG5mdW5jdGlvbiBpc0VtcHR5QXJyKGNvbGxlY3Rpb24pOiBib29sZWFuIHtcbiAgICByZXR1cm4gaXNBcnJheShjb2xsZWN0aW9uKSAmJiBnZXRMZW5ndGgoY29sbGVjdGlvbikgPT09IDBcbn1cblxuZnVuY3Rpb24gaXNFbXB0eU9iaihvYmopOiBib29sZWFuIHtcbiAgICAvLyB7fSAgICAgICAgICAgICAgIHRydWVcbiAgICAvLyBuZXcgQm9vbGVhbigpICAgIHRydWVcbiAgICAvLyBuZXcgTnVtYmVyKCkgICAgIHRydWVcbiAgICAvLyB7aGk6XCJieWVcIn0gICAgICAgZmFsc2VcbiAgICAvLyBbXSAgICAgICAgICAgICAgIGZhbHNlXG4gICAgLy8gdW5kZWZpbmVkICAgICAgICBmYWxzZVxuICAgIC8vIG51bGwgICAgICAgICAgICAgZmFsc2VcbiAgICAvLyAoKT0+e30gICAgICAgICAgIGZhbHNlXG4gICAgLy8gZnVuY3Rpb24oKXt9ICAgICBmYWxzZVxuICAgIC8vIEJvb2xlYW4oKSAgICAgICAgZmFsc2VcbiAgICAvLyBOdW1iZXIoKSAgICAgICAgIGZhbHNlXG4gICAgcmV0dXJuIGlzT2JqZWN0KG9iaikgJiYgIWlzQXJyYXkob2JqKSAmJiBPYmplY3Qua2V5cyhvYmopLmxlbmd0aCA9PT0gMFxufVxuXG5cbmZ1bmN0aW9uIGlzRnVuY3Rpb24oZm46IEFueUZ1bmN0aW9uKTogZm4gaXMgQW55RnVuY3Rpb24ge1xuICAgIC8vICgpPT57fSAgICAgICAgICAgdHJ1ZVxuICAgIC8vIGZ1bmN0aW9uKCl7fSAgICAgdHJ1ZVxuICAgIC8vIEZ1bmN0aW9uICAgICAgICAgdHJ1ZVxuICAgIC8vIEZ1bmN0aW9uKCkgICAgICAgdHJ1ZVxuICAgIC8vIG5ldyBGdW5jdGlvbigpICAgdHJ1ZVxuICAgIC8vIEJvb2xlYW4gICAgICAgICAgdHJ1ZVxuICAgIC8vIE51bWJlciAgICAgICAgICAgdHJ1ZVxuICAgIC8vIHt9ICAgICAgICAgICAgICAgZmFsc2VcbiAgICAvLyB7aGk6XCJieWVcIn0gICAgICAgZmFsc2VcbiAgICAvLyBbXSAgICAgICAgICAgICAgIGZhbHNlXG4gICAgLy8gQm9vbGVhbigpICAgICAgICBmYWxzZVxuICAgIC8vIG5ldyBCb29sZWFuKCkgICAgZmFsc2VcbiAgICAvLyBOdW1iZXIoKSAgICAgICAgIGZhbHNlXG4gICAgLy8gbmV3IE51bWJlcigpICAgICBmYWxzZVxuICAgIC8vIHVuZGVmaW5lZCAgICAgICAgZmFsc2VcbiAgICAvLyBudWxsICAgICAgICAgICAgIGZhbHNlXG4gICAgbGV0IHRvU3RyaW5nZWQgPSB7fS50b1N0cmluZy5jYWxsKGZuKTtcbiAgICByZXR1cm4gISFmbiAmJiB0b1N0cmluZ2VkID09PSAnW29iamVjdCBGdW5jdGlvbl0nXG59XG5cblxuLy8gKiAgdW5kZXJzY29yZS5qc1xuZnVuY3Rpb24gaXNPYmplY3Qob2JqKTogYm9vbGVhbiB7XG4gICAgLy8ge30gICAgICAgICAgICAgICB0cnVlXG4gICAgLy8ge2hpOlwiYnllXCJ9ICAgICAgIHRydWVcbiAgICAvLyBbXSAgICAgICAgICAgICAgIHRydWVcbiAgICAvLyBuZXcgQm9vbGVhbigpICAgIHRydWVcbiAgICAvLyBuZXcgTnVtYmVyKCkgICAgIHRydWVcbiAgICAvLyB1bmRlZmluZWQgICAgICAgIGZhbHNlXG4gICAgLy8gbnVsbCAgICAgICAgICAgICBmYWxzZVxuICAgIC8vICgpPT57fSAgICAgICAgICAgZmFsc2VcbiAgICAvLyBmdW5jdGlvbigpe30gICAgIGZhbHNlXG4gICAgLy8gQm9vbGVhbigpICAgICAgICBmYWxzZVxuICAgIC8vIE51bWJlcigpICAgICAgICAgZmFsc2VcbiAgICByZXR1cm4gdHlwZW9mIG9iaiA9PT0gJ29iamVjdCcgJiYgISFvYmo7XG59XG5cbmZ1bmN0aW9uIHNoYWxsb3dQcm9wZXJ0eTxUPihrZXk6IHN0cmluZyk6IChvYmo6IFQpID0+IFQgZXh0ZW5kcyBudWxsID8gdW5kZWZpbmVkIDogVFtrZXlvZiBUXSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgcmV0dXJuIG9iaiA9PSBudWxsID8gdm9pZCAwIDogb2JqW2tleV07XG4gICAgfTtcbn1cblxuXG5mdW5jdGlvbiBnZXRMZW5ndGgoY29sbGVjdGlvbik6IG51bWJlciB7XG4gICAgcmV0dXJuIHNoYWxsb3dQcm9wZXJ0eSgnbGVuZ3RoJykoY29sbGVjdGlvbilcbn1cblxuXG4vKmNvbnN0IE1BWF9BUlJBWV9JTkRFWCA9IE1hdGgucG93KDIsIDUzKSAtIDE7XG4gXG4gZnVuY3Rpb24gaXNBcnJheUxpa2UoY29sbGVjdGlvbik6IGJvb2xlYW4ge1xuIGNvbnN0IGxlbmd0aCA9IGdldExlbmd0aChjb2xsZWN0aW9uKTtcbiByZXR1cm4gdHlwZW9mIGxlbmd0aCA9PSAnbnVtYmVyJyAmJiBsZW5ndGggPj0gMCAmJiBsZW5ndGggPD0gTUFYX0FSUkFZX0lOREVYO1xuIH1cbiAqL1xuXG5cbi8vICogIG1pc2Ncbi8vIGNoaWxkIGV4dGVuZHMgc3VwXG5mdW5jdGlvbiBleHRlbmQoc3VwLCBjaGlsZCkge1xuICAgIGNoaWxkLnByb3RvdHlwZSA9IHN1cC5wcm90b3R5cGU7XG4gICAgY29uc3QgaGFuZGxlciA9IHtcbiAgICAgICAgY29uc3RydWN0XG4gICAgfTtcbiAgICBcbiAgICAvLyBcIm5ldyBCb3lDbHNcIlxuICAgIGZ1bmN0aW9uIGNvbnN0cnVjdChfLCBhcmdBcnJheSkge1xuICAgICAgICBjb25zdCBvYmogPSBuZXcgY2hpbGQ7XG4gICAgICAgIHN1cC5hcHBseShvYmosIGFyZ0FycmF5KTsgICAgLy8gY2FsbHMgUGVyc29uQ3Rvci4gU2V0cyBuYW1lXG4gICAgICAgIGNoaWxkLmFwcGx5KG9iaiwgYXJnQXJyYXkpOyAvLyBjYWxscyBCb3lDdG9yLiBTZXRzIGFnZVxuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH1cbiAgICBcbiAgICBcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgY29uc3QgcHJveHkgPSBuZXcgUHJveHkoY2hpbGQsIGhhbmRsZXIpO1xuICAgIHJldHVybiBwcm94eTtcbn1cbiIsIi8vIFRPRE86IGh0dHBzOi8vd3d3Lm5wbWpzLmNvbS9wYWNrYWdlL2Nzc3R5cGVcbnR5cGUgT21pdHRlZENzc1Byb3BzID0gXCJhbmltYXRpb25EaXJlY3Rpb25cIlxuICAgIHwgXCJhbmltYXRpb25GaWxsTW9kZVwiXG4gICAgfCBcImFuaW1hdGlvbkl0ZXJhdGlvbkNvdW50XCJcbiAgICB8IFwiYW5pbWF0aW9uUGxheVN0YXRlXCJcbiAgICB8IFwiYW5pbWF0aW9uVGltaW5nRnVuY3Rpb25cIlxuICAgIHwgXCJvcGFjaXR5XCJcbiAgICB8IFwicGFkZGluZ1wiXG4gICAgfCBcInBhZGRpbmdCb3R0b21cIlxuICAgIHwgXCJwYWRkaW5nTGVmdFwiXG4gICAgfCBcInBhZGRpbmdSaWdodFwiXG4gICAgfCBcInBhZGRpbmdUb3BcIlxuICAgIHwgXCJwcmVsb2FkXCJcbiAgICB8IFwid2lkdGhcIlxudHlwZSBQYXJ0aWFsQ3NzU3R5bGVEZWNsYXJhdGlvbiA9IE9taXQ8UGFydGlhbDxDU1NTdHlsZURlY2xhcmF0aW9uPiwgT21pdHRlZENzc1Byb3BzPjtcblxuaW50ZXJmYWNlIENzc09wdGlvbnMgZXh0ZW5kcyBQYXJ0aWFsQ3NzU3R5bGVEZWNsYXJhdGlvbiB7XG4gICAgYW5pbWF0aW9uRGlyZWN0aW9uPzogQW5pbWF0aW9uRGlyZWN0aW9uO1xuICAgIGFuaW1hdGlvbkZpbGxNb2RlPzogQW5pbWF0aW9uRmlsbE1vZGU7XG4gICAgYW5pbWF0aW9uSXRlcmF0aW9uQ291bnQ/OiBudW1iZXI7XG4gICAgYW5pbWF0aW9uUGxheVN0YXRlPzogQW5pbWF0aW9uUGxheVN0YXRlO1xuICAgIGFuaW1hdGlvblRpbWluZ0Z1bmN0aW9uPzogQW5pbWF0aW9uVGltaW5nRnVuY3Rpb247XG4gICAgb3BhY2l0eT86IHN0cmluZyB8IG51bWJlcjtcbiAgICBwYWRkaW5nPzogc3RyaW5nIHwgbnVtYmVyO1xuICAgIHBhZGRpbmdCb3R0b20/OiBzdHJpbmcgfCBudW1iZXI7XG4gICAgcGFkZGluZ0xlZnQ/OiBzdHJpbmcgfCBudW1iZXI7XG4gICAgcGFkZGluZ1JpZ2h0Pzogc3RyaW5nIHwgbnVtYmVyO1xuICAgIHBhZGRpbmdUb3A/OiBzdHJpbmcgfCBudW1iZXI7XG4gICAgcHJlbG9hZD86IFwiYXV0b1wiIHwgc3RyaW5nO1xuICAgIHdpZHRoPzogc3RyaW5nIHwgbnVtYmVyO1xufVxuXG5cbnR5cGUgQ3ViaWNCZXppZXJGdW5jdGlvbiA9IFtudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJdO1xudHlwZSBKdW1wdGVybSA9ICdqdW1wLXN0YXJ0JyB8ICdqdW1wLWVuZCcgfCAnanVtcC1ub25lJyB8ICdqdW1wLWJvdGgnIHwgJ3N0YXJ0JyB8ICdlbmQnO1xuXG4vKipEaXNwbGF5cyBhbiBhbmltYXRpb24gaXRlcmF0aW9uIGFsb25nIG4gc3RvcHMgYWxvbmcgdGhlIHRyYW5zaXRpb24sIGRpc3BsYXlpbmcgZWFjaCBzdG9wIGZvciBlcXVhbCBsZW5ndGhzIG9mIHRpbWUuXG4gKiBGb3IgZXhhbXBsZSwgaWYgbiBpcyA1LCAgdGhlcmUgYXJlIDUgc3RlcHMuXG4gKiBXaGV0aGVyIHRoZSBhbmltYXRpb24gaG9sZHMgdGVtcG9yYXJpbHkgYXQgMCUsIDIwJSwgNDAlLCA2MCUgYW5kIDgwJSwgb24gdGhlIDIwJSwgNDAlLCA2MCUsIDgwJSBhbmQgMTAwJSwgb3IgbWFrZXMgNSBzdG9wcyBiZXR3ZWVuIHRoZSAwJSBhbmQgMTAwJSBhbG9uZyB0aGUgYW5pbWF0aW9uLCBvciBtYWtlcyA1IHN0b3BzIGluY2x1ZGluZyB0aGUgMCUgYW5kIDEwMCUgbWFya3MgKG9uIHRoZSAwJSwgMjUlLCA1MCUsIDc1JSwgYW5kIDEwMCUpIGRlcGVuZHMgb24gd2hpY2ggb2YgdGhlIGZvbGxvd2luZyBqdW1wIHRlcm1zIGlzIHVzZWQqL1xudHlwZSBTdGVwc0Z1bmN0aW9uID0gW251bWJlciwgSnVtcHRlcm1dO1xudHlwZSBBbmltYXRpb25UaW1pbmdGdW5jdGlvbiA9XG4gICAgJ2xpbmVhcidcbiAgICB8ICdlYXNlJ1xuICAgIHwgJ2Vhc2UtaW4nXG4gICAgfCAnZWFzZS1vdXQnXG4gICAgfCAnZWFzZS1pbi1vdXQnXG4gICAgfCAnc3RlcC1zdGFydCdcbiAgICB8ICdzdGVwLWVuZCdcbiAgICB8IFN0ZXBzRnVuY3Rpb25cbiAgICB8IEN1YmljQmV6aWVyRnVuY3Rpb25cbnR5cGUgQW5pbWF0aW9uRGlyZWN0aW9uID0gJ25vcm1hbCcgfCAncmV2ZXJzZScgfCAnYWx0ZXJuYXRlJyB8ICdhbHRlcm5hdGUtcmV2ZXJzZSc7XG50eXBlIEFuaW1hdGlvbkZpbGxNb2RlID0gJ25vbmUnIHwgJ2ZvcndhcmRzJyB8ICdiYWNrd2FyZHMnIHwgJ2JvdGgnO1xuXG5pbnRlcmZhY2UgVHJhbnNmb3JtT3B0aW9ucyB7XG4gICAgbWF0cml4PzogW251bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJdLFxuICAgIG1hdHJpeDNkPzogW251bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcl0sXG4gICAgcGVyc3BlY3RpdmU/OiBzdHJpbmcsIC8vIHB4XG4gICAgcm90YXRlPzogc3RyaW5nLCAvLyBkZWdcbiAgICByb3RhdGUzZD86IFtudW1iZXIsIG51bWJlciwgbnVtYmVyLCBzdHJpbmddIC8vIFssLCxkZWddXG4gICAgcm90YXRlWD86IHN0cmluZyxcbiAgICByb3RhdGVZPzogc3RyaW5nLFxuICAgIHJvdGF0ZVo/OiBzdHJpbmcsXG4gICAgc2NhbGU/OiBudW1iZXIsIC8vIDEuNVxuICAgIHNjYWxlM2Q/OiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl0sXG4gICAgc2NhbGVYPzogW251bWJlciwgbnVtYmVyLCBudW1iZXJdLFxuICAgIHNjYWxlWT86IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXSxcbiAgICBza2V3PzogW3N0cmluZywgc3RyaW5nXSAvLyBkZWcsIGRlZ1xuICAgIHNrZXdYPzogc3RyaW5nLFxuICAgIHNrZXdZPzogc3RyaW5nLFxuICAgIHRyYW5zbGF0ZT86IFtzdHJpbmcsIHN0cmluZ10sIC8vIHB4LCBweFxuICAgIHRyYW5zbGF0ZTNkPzogW3N0cmluZywgc3RyaW5nLCBzdHJpbmddLFxuICAgIHRyYW5zbGF0ZVg/OiBzdHJpbmcsXG4gICAgdHJhbnNsYXRlWT86IHN0cmluZyxcbiAgICB0cmFuc2xhdGVaPzogc3RyaW5nLFxuICAgIFxuICAgIFxufVxuXG5pbnRlcmZhY2UgQW5pbWF0ZU9wdGlvbnMge1xuICAgIGRlbGF5Pzogc3RyaW5nO1xuICAgIGRpcmVjdGlvbj86IEFuaW1hdGlvbkRpcmVjdGlvbjtcbiAgICBkdXJhdGlvbjogc3RyaW5nO1xuICAgIGZpbGxNb2RlPzogQW5pbWF0aW9uRmlsbE1vZGU7XG4gICAgaXRlcmF0aW9uQ291bnQ/OiBudW1iZXI7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIHBsYXlTdGF0ZT86IEFuaW1hdGlvblBsYXlTdGF0ZTtcbiAgICAvKiogQWxzbyBhY2NlcHRzOlxuICAgICAqIGN1YmljLWJlemllcihwMSwgcDIsIHAzLCBwNClcbiAgICAgKiAnZWFzZScgPT0gJ2N1YmljLWJlemllcigwLjI1LCAwLjEsIDAuMjUsIDEuMCknXG4gICAgICogJ2xpbmVhcicgPT0gJ2N1YmljLWJlemllcigwLjAsIDAuMCwgMS4wLCAxLjApJ1xuICAgICAqICdlYXNlLWluJyA9PSAnY3ViaWMtYmV6aWVyKDAuNDIsIDAsIDEuMCwgMS4wKSdcbiAgICAgKiAnZWFzZS1vdXQnID09ICdjdWJpYy1iZXppZXIoMCwgMCwgMC41OCwgMS4wKSdcbiAgICAgKiAnZWFzZS1pbi1vdXQnID09ICdjdWJpYy1iZXppZXIoMC40MiwgMCwgMC41OCwgMS4wKSdcbiAgICAgKiAqL1xuICAgIHRpbWluZ0Z1bmN0aW9uPzogQW5pbWF0aW9uVGltaW5nRnVuY3Rpb247XG59XG4iLCJpbnRlcmZhY2UgQmFzZUVsZW1Db25zdHJ1Y3RvciB7XG4gICAgaWQ/OiBzdHJpbmc7XG4gICAgY2xzPzogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgU3ViRWxlbUNvbnN0cnVjdG9yIGV4dGVuZHMgQmFzZUVsZW1Db25zdHJ1Y3RvciB7XG4gICAgdGV4dD86IHN0cmluZztcbn1cblxuaW50ZXJmYWNlIEltZ0NvbnN0cnVjdG9yIGV4dGVuZHMgQmFzZUVsZW1Db25zdHJ1Y3RvciB7XG4gICAgc3JjPzogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgQW5jaG9yQ29uc3RydWN0b3IgZXh0ZW5kcyBTdWJFbGVtQ29uc3RydWN0b3Ige1xuICAgIGhyZWY/OiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBTdmdDb25zdHJ1Y3RvciBleHRlbmRzIEJhc2VFbGVtQ29uc3RydWN0b3Ige1xuICAgIGh0bWxFbGVtZW50PzogU1ZHRWxlbWVudDtcbn1cbiIsImludGVyZmFjZSBUTWFwPFQ+IHtcbiAgICBbczogc3RyaW5nXTogVDtcbiAgICBcbiAgICBbczogbnVtYmVyXTogVFxufVxuXG5pbnRlcmZhY2UgVFJlY01hcDxUPiB7XG4gICAgW3M6IHN0cmluZ106IFQgfCBUUmVjTWFwPFQ+O1xuICAgIFxuICAgIFtzOiBudW1iZXJdOiBUIHwgVFJlY01hcDxUPlxufVxuXG5cbnR5cGUgVEV2ZW50ID0ga2V5b2YgSFRNTEVsZW1lbnRFdmVudE1hcDtcbnR5cGUgRnVuY3Rpb25SZWNpZXZlc0V2ZW50PEsgZXh0ZW5kcyBURXZlbnQ+ID0gKGV2ZW50OiBIVE1MRWxlbWVudEV2ZW50TWFwW0tdKSA9PiB2b2lkO1xudHlwZSBURXZlbnRGdW5jdGlvbk1hcDxLIGV4dGVuZHMgVEV2ZW50PiA9IHtcbiAgICBbUCBpbiBLXT86IEZ1bmN0aW9uUmVjaWV2ZXNFdmVudDxQPjtcbn07XG5cbnR5cGUgSFRNTFRhZyA9IGtleW9mIEhUTUxFbGVtZW50VGFnTmFtZU1hcDtcbnR5cGUgUXVlcnlTZWxlY3RvciA9IEhUTUxUYWcgfCBzdHJpbmc7XG5cbnR5cGUgQ2hpbGRyZW5PYmogPSBUTWFwPFF1ZXJ5U2VsZWN0b3I+IHwgVFJlY01hcDxRdWVyeVNlbGVjdG9yPlxudHlwZSBFbnVtZXJhdGVkPFQ+ID1cbiAgICBUIGV4dGVuZHMgKGluZmVyIFUpW10gPyBbbnVtYmVyLCBVXVtdXG4gICAgICAgIDogVCBleHRlbmRzIFRNYXA8KGluZmVyIFUpPiA/IFtrZXlvZiBULCBVXVtdXG4gICAgICAgIDogVCBleHRlbmRzIGJvb2xlYW4gPyBuZXZlciA6IGFueTtcbnR5cGUgVFJldHVybkJvb2xlYW4gPSAoczogc3RyaW5nKSA9PiBib29sZWFuO1xudHlwZSBBbnlGdW5jdGlvbiA9ICguLi5hcmdzOiBhbnlbXSkgPT4gYW55O1xuIl19